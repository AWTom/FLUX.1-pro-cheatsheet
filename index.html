<!DOCTYPE html>
<html>
	<head>
		<link rel="icon" href="i.svg" sizes="any" type="image/svg+xml">
		<svg>
			<symbol id="minimize" viewBox="0 0 512 512">
				<!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
				<path d="M456 224l-144 0c-13.3 0-24-10.7-24-24l0-144c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2l40 40L442.3 5.7C446 2 450.9 0 456 0s10 2 13.7 5.7l36.7 36.7C510 46 512 50.9 512 56s-2 10-5.7 13.7L433 143l40 40c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8zm0 64c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-40 40 73.4 73.4c3.6 3.6 5.7 8.5 5.7 13.7s-2 10-5.7 13.7l-36.7 36.7C466 510 461.1 512 456 512s-10-2-13.7-5.7L369 433l-40 40c-6.9 6.9-17.2 8.9-26.2 5.2s-14.8-12.5-14.8-22.2l0-144c0-13.3 10.7-24 24-24l144 0zm-256 0c13.3 0 24 10.7 24 24l0 144c0 9.7-5.8 18.5-14.8 22.2s-19.3 1.7-26.2-5.2l-40-40L69.7 506.3C66 510 61.1 512 56 512s-10-2-13.7-5.7L5.7 469.7C2 466 0 461.1 0 456s2-10 5.7-13.7L79 369 39 329c-6.9-6.9-8.9-17.2-5.2-26.2s12.5-14.8 22.2-14.8l144 0zM56 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l40-40L5.7 69.7C2 66 0 61.1 0 56s2-10 5.7-13.7L42.3 5.7C46 2 50.9 0 56 0s10 2 13.7 5.7L143 79l40-40c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 144c0 13.3-10.7 24-24 24L56 224z"/>
			</symbol>
			<symbol id="fluxproart" viewBox="0 0 512 512">
				<!-- Making SVGs is fun! -->
				<g fill="none" stroke="#fff" stroke-width="40"><circle cx="256" cy="256" r="215"/><path d="m58 341h244z"/><path d="m230 470 122-211z"/><path d="m428 385-122-211z"/><path d="m454 171h-244z"/><path d="m281 42-122 211z"/><path d="m83 127 122 211z"/></g>
			</symbol>
		</svg>	
		<style>
body {
	margin: 0;
	font-family: sans-serif;
	color-scheme: light dark;
}
.table {
	display: flex;
	justify-content: center;
	flex-direction: column;
}
.row {
	display: flex;
	cursor: e-resize;
}
.row-info {
	flex: 0 0 27vw;
	margin-inline: 0.5vw;
	align-content: center;
	text-align: end;
	text-wrap: balance;
	position: relative;
	transition: margin 0.25s ease-out, --v 0.25s ease-out;
}
.row-icons {
	height: 0.5em;
	margin-left: 0.5em;
	position: absolute;
}
.row-icons svg {
	width: 0.9em;
	height: 0.9em;
	opacity: 0;
	transition: opacity 0.05s linear;
}
.row > img {
	width: 10vw;
	height: 10vw;
	border-radius: 0.5vw;
	margin: 0.5vw;
	transition: width 0.25s ease-out, height 0.25s ease-out;
}
.row > img.loading {
	cursor: wait;
}
.row.row-expanded {
	cursor: auto;
	flex-wrap: wrap;
	justify-content: center;
	font-size: 1.25em;
}
.row.row-expanded img {
	width: 24vw;
	height: 24vw;
	position: relative;
	top: -1lh;
	margin-block-end: calc(0.5vw - 1lh);
}
@property --v {
	syntax: '<percentage>';
	inherits: false;
	initial-value: 0%;
}
.row.row-expanded .row-info {
	--v: 100%;
	flex: 0 0 100vw;
	text-align: center;
	/*height: 0;*/
	margin-block-start: 1.5lh;
	bottom: 1lh;
	background: linear-gradient(0deg, #f9f9f9 0%, #f9f9f9 var(--v), transparent var(--v));
	background-clip: text;
	-webkit-text-fill-color: transparent;
}
.row.row-expanded:hover .row-icons svg {
	opacity: 1;
}
@media (prefers-color-scheme: dark) {
	body {
		background: #272727;
		color: #f9f9f9;
	}
}
		</style>
	</head>
	<body>
		<h1>FLUX.1-pro-cheatsheet</h1>
		<p>A collection of what FLUX.1 [pro] generates when prompted with "Style of [artist name]" for <span id="numArtists" /> artists. Huge thanks to <a href="https://fluxpro.art/users/clznf8wx700q98csskgsrhzc9">fluxpro.art</a> for generation resources, and <a href="https://github.com/SupaGruen/StableDiffusion-CheatSheet">Github user SupaGruen</a> for the basis of this project.</p>
		<p>Most prompts were run with 25 steps, guidance 3, and seed 1.</p>
		<p>Updates, additions, refinement, and analysis to come.</p>
		William Strealy - <a href="https://www.linkedin.com/in/william-strealy/">LinkedIn</a> <a href="https://github.com/AWTom/FLUX.1-pro-cheatsheet">Github</a>

		<span id="loading">Loading...</span>
		<script type="text/javascript">
			async function loadCSV(url) {
				try {
					const response = await fetch(url);
					if (!response.ok) {
						throw new Error(`Error: ${response.status}`);
					}

					const csv = await response.text();
					return csv;
				} catch (e) {
					console.error(e);
				}
			}
			const promptPrefix = "Style of ";
			const fluxProArtUrlPrefix = "https://fluxpro.art/prompts/";
			loadCSV("/artistNamesLinks.csv").then(artistNamesLinks => {
				const table = document.createElement("div");
				table.className = "table";
				table.innerHTML = artistNamesLinks.split("\n").map((l, i) => {
					const [name, link] = l.split(",");
					const fileName = "Styleof" + name.replaceAll(" ", "").replaceAll(".", "");
					const imgTags = ["0", "1", "2", "3"].map(i => `<img src="https://strea.ly/cdn-cgi/image/w=128,h=128/${fileName}${i}.webp">`).join("");
					return `<div id="${i}" class="row"><div class="row-info">Style of ${name}<span class="row-icons"><a href="https://fluxpro.art/prompts/${link}" target="_blank" rel="noopener noreferrer"><svg class="fluxproart"><use href="#fluxproart" /></svg></a></span></div>${imgTags}</div>`
				}).join("");

				// Click on unexpanded row: expand row
				// Click on expanded row image: expand image
				// Click on expanded row info: minimize row
				// Click on expanded row fluxproart icon: link
				table.addEventListener('click', event => {
					// TODO make this more specific so it doesn't trigger on the blank area of the row
					if (event.target !== table && table.contains(event.target)) {
						const row = event.target.closest('.row');

						if (row) {
							if (!row.classList.contains('row-expanded')) {
								console.log(event.target);
							}
							// Maximize row
							row.classList.add('row-expanded');

							// Add larger images
							Array.from(row.children).forEach(e => {
								if (e.tagName === "IMG") {
									e.classList.add("loading");
									e.setAttribute("src", e.getAttribute("src").replace("cdn-cgi/image/w=128,h=128/", ""));
								}
							});
						}
					}
				});

				// TODO check if this has a performance penalty on page load
				// TODO remove loading if loading failed
				table.addEventListener("load", event => {
					const e = event.target;
					if (e.tagName === "IMG" && e.classList.contains("loading")) {
						e.classList.remove("loading");
					}
				}, true);

				document.body.appendChild(table);

				document.getElementById("loading").remove();
			});
			
			// TODO: save favorites, add views, links, settings, generation request
		</script>
	</body>
</html>
